import{S as t,i as s,s as r,e as a,k as e,t as o,c,a as n,d as l,n as i,g as u,V as f,b as d,f as h,E as p,J as v,F as m,j as g,m as $,o as E,x as j,u as b,v as x,w as T,K as y,r as w}from"../../chunks/vendor-e2ae8b6c.js";import{c as D}from"../../chunks/cart-afee4e8c.js";function P(t){let s,r,g,$,E,j,b,x,T,y,w,D,P,k,I,V,A,B,N,O,H,S=t[3]?"Add to cart":"Not available";return{c(){s=a("div"),r=a("div"),g=a("img"),E=e(),j=a("h1"),b=o(t[1]),x=e(),T=a("h2"),y=o("Price: "),w=o(t[2]),D=o("$"),P=e(),k=a("button"),I=o(S),V=e(),A=a("a"),B=a("button"),N=o("Details"),this.h()},l(a){s=c(a,"DIV",{class:!0});var e=n(s);r=c(e,"DIV",{class:!0});var o=n(r);g=c(o,"IMG",{src:!0,alt:!0}),o.forEach(l),E=i(e),j=c(e,"H1",{});var f=n(j);b=u(f,t[1]),f.forEach(l),x=i(e),T=c(e,"H2",{});var d=n(T);y=u(d,"Price: "),w=u(d,t[2]),D=u(d,"$"),d.forEach(l),P=i(e),k=c(e,"BUTTON",{});var h=n(k);I=u(h,S),h.forEach(l),V=i(e),A=c(e,"A",{href:!0});var p=n(A);B=c(p,"BUTTON",{});var v=n(B);N=u(v,"Details"),v.forEach(l),p.forEach(l),e.forEach(l),this.h()},h(){f(g.src,$=t[0][0].url)||d(g,"src",$),d(g,"alt",t[1]),d(r,"class","image-holder svelte-o73esj"),k.disabled=!t[3],d(A,"href","/products/"+t[4]),d(s,"class","card svelte-o73esj")},m(a,e){h(a,s,e),p(s,r),p(r,g),p(s,E),p(s,j),p(j,b),p(s,x),p(s,T),p(T,y),p(T,w),p(T,D),p(s,P),p(s,k),p(k,I),p(s,V),p(s,A),p(A,B),p(B,N),O||(H=v(k,"click",t[5]),O=!0)},p:m,i:m,o:m,d(t){t&&l(s),O=!1,H()}}}function k(t,s,r){let{product:a}=s;const{images:e,name:o,price:c,available:n,slug:l}=a;return t.$$set=t=>{"product"in t&&r(6,a=t.product)},[e,o,c,n,l,()=>D.addProduct(a),a]}class I extends t{constructor(t){super(),s(this,t,k,P,r,{product:6})}}function V(t,s,r){const a=t.slice();return a[1]=s[r],a}function A(t){let s,r;return s=new I({props:{product:t[1]}}),{c(){g(s.$$.fragment)},l(t){$(s.$$.fragment,t)},m(t,a){E(s,t,a),r=!0},p(t,r){const a={};1&r&&(a.product=t[1]),s.$set(a)},i(t){r||(j(s.$$.fragment,t),r=!0)},o(t){b(s.$$.fragment,t),r=!1},d(t){x(s,t)}}}function B(t){let s,r,e=t[0],o=[];for(let a=0;a<e.length;a+=1)o[a]=A(V(t,e,a));const i=t=>b(o[t],1,1,(()=>{o[t]=null}));return{c(){s=a("div");for(let t=0;t<o.length;t+=1)o[t].c();this.h()},l(t){s=c(t,"DIV",{class:!0});var r=n(s);for(let s=0;s<o.length;s+=1)o[s].l(r);r.forEach(l),this.h()},h(){d(s,"class","products svelte-1uv9asd")},m(t,a){h(t,s,a);for(let r=0;r<o.length;r+=1)o[r].m(s,null);r=!0},p(t,[r]){if(1&r){let a;for(e=t[0],a=0;a<e.length;a+=1){const c=V(t,e,a);o[a]?(o[a].p(c,r),j(o[a],1)):(o[a]=A(c),o[a].c(),j(o[a],1),o[a].m(s,null))}for(w(),a=e.length;a<o.length;a+=1)i(a);T()}},i(t){if(!r){for(let t=0;t<e.length;t+=1)j(o[t]);r=!0}},o(t){o=o.filter(Boolean);for(let s=0;s<o.length;s+=1)b(o[s]);r=!1},d(t){t&&l(s),y(o,t)}}}var N=function(t,s,r,a){return new(r||(r=Promise))((function(e,o){function c(t){try{l(a.next(t))}catch(s){o(s)}}function n(t){try{l(a.throw(t))}catch(s){o(s)}}function l(t){var s;t.done?e(t.value):(s=t.value,s instanceof r?s:new r((function(t){t(s)}))).then(c,n)}l((a=a.apply(t,s||[])).next())}))};const O=({fetch:t})=>N(void 0,void 0,void 0,(function*(){const s=yield t("/api/products",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST"});if(200===s.status){return{props:{products:yield s.json()}}}return{status:s.status,error:s.statusText}}));function H(t,s,r){let{products:a}=s;return t.$$set=t=>{"products"in t&&r(0,a=t.products)},[a]}class S extends t{constructor(t){super(),s(this,t,H,B,r,{products:0})}}export{S as default,O as load};
